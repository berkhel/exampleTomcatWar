/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java-library'
    id 'maven-publish'
    id 'war'
}

repositories {
    mavenCentral()
    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }
}

dependencies {
    testImplementation 'org.junit.jupiter:junit-jupiter-engine:5.9.2'
}

group = 'com.mimmo'
version = '1.0-SNAPSHOT'
description = 'Maven Webapp'
java.sourceCompatibility = JavaVersion.VERSION_1_8

publishing {
    publications {
        maven(MavenPublication) {
            from(components.java)
        }
    }
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

tasks.withType(Javadoc) {
    options.encoding = 'UTF-8'
}

war{
    manifest{
	attributes 'Main-Class':'com.mimmo.SomeClass'
    }
}

task loadArtifactOnTomcat(type: Copy){
    from "$buildDir/libs"
    into "c:/Program Files/Apache Software Foundation/Tomcat 9.0/webapps"
}

war.finalizedBy loadArtifactOnTomcat

tasks.named('test'){

    useJUnitPlatform()

    testLogging{
	events 'passed','skipped','failed'
    }
    systemProperty 'servlet.port','8081'
    systemProperty 'app.version', version
}
